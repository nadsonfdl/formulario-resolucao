<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerar Resolu√ß√£o</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #eef2f7;
    }

    .container {
      max-width: 1200px;
      margin: 30px auto;
      padding: 20px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.07);
    }

    .header {
      background: linear-gradient(to right, #1e88e5, #42a5f5);
      padding: 30px;
      color: white;
      border-radius: 12px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.2em;
      margin: 0;
    }

    .content {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      margin-top: 30px;
    }

    .left-panel, .right-panel {
      flex: 1;
      min-width: 300px;
      background-color: #f9fafc;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
    }

    h2 {
      font-size: 1.4em;
      color: #333;
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: 600;
    }

    textarea, .editable-box {
      width: 100%;
      min-height: 130px;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 1em;
      resize: vertical;
      background: #fff;
      margin-bottom: 20px;
    }

    textarea:focus, .editable-box:focus {
      outline: none;
      border-color: #1e88e5;
    }

    button {
      background-color: #1e88e5;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 1em;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #1565c0;
    }

    .resolucao-area {
      margin-top: 40px;
      background-color: #f0f6ff;
      padding: 20px;
      border-radius: 12px;
    }

    .editable-box {
      background-color: #ffffff;
    }

    .footer {
      text-align: center;
      margin-top: 60px;
      padding: 20px;
      background-color: #333;
      color: white;
      border-radius: 0 0 12px 12px;
    }

    @media screen and (max-width: 768px) {
      .content {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üìù Gerar Resolu√ß√£o de Atendimento</h1>
    </div>

    <div class="content">
      <div class="left-panel">
        <h2>Preencha as informa√ß√µes</h2>
        <label for="resumoConversa">üó£Ô∏è Resumo da conversa com o cliente:</label>
        <textarea id="resumoConversa" placeholder="Descreva aqui a conversa com o cliente..."></textarea>

        <label for="resumoTecnico">üîß Resumo t√©cnico do agente:</label>
        <textarea id="resumoTecnico" placeholder="Descreva as a√ß√µes que voc√™ tomou no atendimento..."></textarea>

        <button onclick="gerarResolucao()">‚ö° Gerar Resolu√ß√£o</button>
      </div>



      
      <div class="right-panel">
  <h2>üìò Guia de Preenchimento da Resolu√ß√£o</h2>
  <p style="margin-bottom: 15px;">
    Utilize este guia para redigir uma resolu√ß√£o clara e completa com base no atendimento. 
    Preencha cada campo com informa√ß√µes objetivas e organizadas.
  </p>

  <ul style="list-style-type: none; padding-left: 0;">

    <li style="margin-bottom: 20px;">
      <strong>üß© 1. Quest√£o do Cliente:</strong><br>
      <span style="color: #555;">
        Descreva de forma clara o que o cliente solicitou, perguntou ou relatou como problema. Seja objetivo.
      </span><br>
      <em><u>Exemplo:</u> O cliente deseja um relat√≥rio de informes de rendimentos (Imposto de Renda) ou informa√ß√µes sobre como gerar um relat√≥rio de notas fiscais emitidas no ano anterior para um paciente, visando a declara√ß√£o de imposto de renda.</em>
    </li>

    <li style="margin-bottom: 20px;">
      <strong>üîé 2. A√ß√µes Realizadas:</strong><br>
      <span style="color: #555;">
        Informe quais orienta√ß√µes foram dadas ao cliente, ou quais verifica√ß√µes foram feitas at√© aquele momento.
      </span><br>
      <em><u>Exemplo:</u> Foi explicado ao cliente que o sistema possui uma funcionalidade espec√≠fica para emitir a declara√ß√£o de IR do paciente.</em>
    </li>

    <li style="margin-bottom: 20px;">
      <strong>üß≠ 3. Passo a Passo no Sistema:</strong><br>
      <span style="color: #555;">
        Detalhe o caminho dentro do sistema, com clareza e em ordem cronol√≥gica.
      </span><br>
      <em><u>Exemplo:</u> Acesse o menu <strong>PRONTU√ÅRIO</strong> > clique na <strong>seta ao lado do bot√£o "Paciente"</strong> no canto superior direito > selecione a op√ß√£o <strong>"Declara√ß√£o IRPF"</strong>.</em>
    </li>

    <li style="margin-bottom: 20px;">
      <strong>üõ†Ô∏è 4. A√ß√µes T√©cnicas (se houver):</strong><br>
      <span style="color: #555;">
        Especifique qualquer an√°lise t√©cnica feita: verifica√ß√£o de logs, testes, ajustes ou registros acessados.
      </span><br>
      <em><u>Exemplo:</u> Foi realizada verifica√ß√£o da fun√ß√£o na base do cliente. Nenhuma inconsist√™ncia foi encontrada. Todos os dados estavam atualizados.</em>
    </li>

    <li style="margin-bottom: 20px;">
      <strong>‚úÖ 5. Resultado Final:</strong><br>
      <span style="color: #555;">
        Informe o desfecho do atendimento. O problema foi resolvido? O cliente conseguiu realizar a a√ß√£o?
      </span><br>
      <em><u>Exemplo:</u> O cliente conseguiu emitir a declara√ß√£o de IR com sucesso ap√≥s a orienta√ß√£o.</em>
    </li>

  </ul>

  <p style="margin-top: 25px; color: #333; font-style: italic;">
    ‚úèÔ∏è Dica: escreva de forma clara, evite termos t√©cnicos excessivos e sempre registre os caminhos e a√ß√µes feitas. Isso ajuda na rastreabilidade e facilita futuras consultas.
  </p>
</div>


      
    </div>

    <!-- √Årea de visualiza√ß√£o da resolu√ß√£o -->
    <div id="resolucaoGerada" class="resolucao-area" style="display:none;">
      <h2>üìÑ Resolu√ß√£o Gerada (Edit√°vel)</h2>
      <div id="resolucaoTexto" class="editable-box" contenteditable="true"></div>
      <br>
      <button onclick="enviarParaSheets()">üõÑ Enviar para Google Sheets</button>
    </div>

    <div class="footer">
      Desenvolvido por Nadson - Analista de Suporte IGUT
    </div>
  </div>

  <script>
    const openaiApiKey = 'SUA_CHAVE_DE_API_AQUI';

    async function gerarResolucao() {
      const resumoConversa = document.getElementById('resumoConversa').value.trim();
      const resumoTecnico = document.getElementById('resumoTecnico').value.trim();

      if (!resumoConversa || !resumoTecnico) {
        alert("Por favor, preencha ambos os campos.");
        return;
      }

      const prompt = `Resumo da conversa com o cliente: ${resumoConversa}\nResumo t√©cnico do agente: ${resumoTecnico}\nGere uma resolu√ß√£o clara, estruturada e profissional para documentar o atendimento realizado.`;

      const response = await fetch('https://api.openai.com/v1/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${openaiApiKey}`
        },
        body: JSON.stringify({
          model: 'text-davinci-003',
          prompt: prompt,
          max_tokens: 200
        })
      });

      const data = await response.json();
      const resolucao = data.choices[0].text.trim();

      document.getElementById('resolucaoTexto').textContent = resolucao;
      document.getElementById('resolucaoGerada').style.display = 'block';
    }

    async function enviarParaSheets() {
      const resolucaoTexto = document.getElementById('resolucaoTexto').textContent.trim();

      if (!resolucaoTexto) {
        alert("A resolu√ß√£o est√° vazia.");
        return;
      }

      const response = await fetch('https://script.google.com/macros/s/SEU_SCRIPT_ID/exec', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ texto: resolucaoTexto })
      });

      const data = await response.json();
      if (data.success) {
        alert('‚úÖ Resolu√ß√£o enviada com sucesso!');
      } else {
        alert('‚ùå Erro ao enviar resolu√ß√£o.');
      }
    }
  </script>
</body>
</html>
